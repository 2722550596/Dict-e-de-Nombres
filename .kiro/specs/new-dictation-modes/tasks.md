# 实现计划

- [x] 1. 扩展核心类型系统以支持新的听写模式









  - 更新 GameMode 类型定义，添加 'time'、'direction'、'length' 模式
  - 创建 TimeContent、DirectionContent、LengthContent 接口
  - 扩展 ExerciseSettings 接口以支持新模式的专用配置选项
  - 更新相关的类型守卫和验证函数
  - _需求: 1.1, 2.1, 3.1, 4.2_

- [ ] 2. 创建新模式的数据生成器
  - [x] 2.1 实现时间内容生成器





    - 创建 generateTimeContent 函数，支持年、月、日、星期、完整日期生成
    - 实现多语言时间表达的生成逻辑
    - 添加时间格式的多样性支持（数字格式、文字格式等）
    - 创建时间内容的验证和格式化工具函数
    - _需求: 1.1, 1.2, 1.3_

  - [x] 2.2 实现方位内容生成器





    - 创建 generateDirectionContent 函数，支持基本方位、相对方位、空间方位
    - 实现方位按钮的位置计算逻辑
    - 添加复合方位表达的生成支持
    - 创建多语言方位词汇的映射和验证
    - _需求: 2.1, 2.2_

  - [x] 2.3 实现长度内容生成器





    - 创建 generateLengthContent 函数，支持各种长度单位和数值组合
    - 实现长度表达的多格式生成（数字+单位、文字+单位）
    - 添加单位换算和验证逻辑
    - 创建长度范围和复杂度的配置支持
    - _需求: 3.1, 3.2, 3.3, 3.4_

- [ ] 3. 创建专用的练习界面组件
  - [x] 3.1 实现长文本练习网格组件








    - 创建 LongTextPracticeGrid 组件，用于时间和长度听写
    - 实现自适应输入框宽度和优化的键盘导航
    - 添加长文本输入的性能优化和虚拟化支持
    - 集成现有的音频播放状态显示功能
    - _需求: 1.5, 3.5_

  - [x] 3.2 实现方位按钮网格组件





    - 创建 DirectionButtonGrid 组件，提供可视化方位选择界面
    - 实现响应式按钮布局和视觉提示功能
    - 添加即时反馈显示（正确/错误状态）
    - 创建按钮位置的动态计算和适配逻辑
    - _需求: 2.3, 2.4_

- [ ] 4. 实现新模式的专用练习面板



  - [x] 4.1 创建时间听写面板组件





    - 实现 TimeDictationPanel 组件，集成长文本练习网格
    - 添加时间类型选择的多选框界面
    - 实现批量提交和多格式答案验证逻辑
    - 集成现有的音频控制和进度显示功能
    - _需求: 1.4, 1.6_

  - [x] 4.2 创建方位听写面板组件








    - 实现 DirectionDictationPanel 组件，集成方位按钮网格
    - 添加方位类型选择的多选框界面
    - 实现即时反馈和自动播放下一题的逻辑
    - 创建方位听写的专用状态管理和进度跟踪
    - _需求: 2.1, 2.4_

  - [x] 4.3 创建长度听写面板组件
    - 实现 LengthDictationPanel 组件，复用长文本练习布局
    - 添加长度单位选择和范围配置界面
    - 实现长度表达的多格式验证和单位换算提示
    - 集成批量提交逻辑和错误处理机制
    - _需求: 3.4, 3.5, 3.6_

- [x] 5. 更新模式选择器和主界面集成
  - 扩展 ModeSelector 组件，添加三个新模式的选项卡
  - 更新主应用组件的路由逻辑，支持新模式的切换
  - 实现新模式与现有界面布局的一致性
  - 添加模式切换时的状态重置和数据清理
  - _需求: 4.1, 4.2_

- [x] 6. 扩展游戏配置和难度系统
  - [x] 6.1 添加新模式的配置定义
    - 在 game.config.ts 中添加 NEW_MODE_CONFIGS 配置
    - 创建 TIME_DIFFICULTIES、DIRECTION_DIFFICULTIES、LENGTH_DIFFICULTIES 配置
    - 实现新模式的经验值倍数和难度等级设置
    - _需求: 4.3_

  - [x] 6.2 更新难度选择器支持新模式 #取消该任务，没必要
    - 扩展 DifficultySelector 组件，支持新模式的难度选项
    - 实现模式特定的难度分类和搜索功能
    - 添加新模式难度的描述和提示信息
    - 创建难度选择的验证和默认值逻辑
    - _需求: 1.4, 2.1, 3.4_

- [x] 7. 实现多语言支持扩展
  - [x] 7.1 添加新模式的翻译键
    - 扩展 Translations 接口，添加新模式相关的翻译键
    - 为三种语言（中文、英文、法文）添加新模式的完整翻译
    - 实现时间、方位、长度相关词汇的多语言映射
    - 添加新模式难度选项的多语言描述
    - _需求: 4.4_

  - [x] 7.2 实现语言特定的内容处理
    - 创建时间表达的多语言格式化函数
    - 实现方位词汇的语言特定映射和验证
    - 添加长度单位的地区化支持（公制/英制）
    - 创建语音合成的语言适配和发音优化
    - _需求: 1.2, 2.2, 3.2_

- [ ] 8. 扩展数据持久化和统计系统
  - [x] 8.1 更新用户数据结构
    - 扩展 UserData 接口，添加新模式的统计字段
    - 实现新模式练习结果的本地存储逻辑
    - 创建新模式数据的迁移和兼容性处理
    - 添加新模式统计数据的初始化和重置功能
    - _需求: 5.1, 5.3_

  - [ ] 8.2 实现智能推荐系统扩展
    - 更新推荐算法，考虑新模式的练习表现
    - 实现跨模式的学习进度分析和建议
    - 添加新模式的个性化难度推荐逻辑
    - 创建新模式练习频率和效果的统计分析
    - _需求: 5.2_

- [ ] 9. 实现答案验证和错误处理系统
  - [ ] 9.1 创建时间听写的验证逻辑
    - 实现多种时间格式的识别和验证算法
    - 添加年份范围、月日有效性的检查逻辑
    - 创建时间表达的标准化和比较函数
    - 实现时间听写错误的详细反馈机制
    - _需求: 1.3_

  - [ ] 9.2 创建方位听写的验证逻辑
    - 实现方位按钮选择的即时验证
    - 添加复合方位表达的正确性检查
    - 创建方位词汇的同义词识别和处理
    - 实现方位听写的即时反馈和错误提示
    - _需求: 2.4_

  - [ ] 9.3 创建长度听写的验证逻辑
    - 实现数值和单位的分离识别算法
    - 添加单位换算的容错处理和验证
    - 创建长度表达的多格式支持和标准化
    - 实现长度听写的错误分析和改进建议
    - _需求: 3.3_

- [ ] 10. 集成测试和性能优化
  - [ ] 10.1 实现组件单元测试
    - 为新增的数据生成器创建全面的单元测试
    - 测试新组件的渲染、交互和状态管理
    - 验证答案验证逻辑的正确性和边界情况处理
    - 测试多语言支持的完整性和一致性
    - _需求: 4.2_

  - [ ] 10.2 进行集成测试和性能优化
    - 测试新模式与现有系统的集成和兼容性
    - 验证音频播放、状态管理、数据持久化的协调工作
    - 优化长文本输入和按钮网格的渲染性能
    - 测试跨浏览器兼容性和移动端适配效果
    - _需求: 4.1, 4.2, 4.3_

- [ ] 11. 最终集成和用户体验优化
  - 整合所有新模式到主应用流程中
  - 验证新模式的完整用户体验流程
  - 优化界面过渡动画和交互反馈
  - 进行最终的代码审查和文档更新
  - _需求: 4.1, 4.2, 4.3, 4.4_