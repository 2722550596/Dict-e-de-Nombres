<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šè¯­è¨€å¬å†™æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .language-selector {
            margin: 10px 0;
        }
        select {
            padding: 5px 10px;
            font-size: 16px;
        }
        button {
            padding: 8px 15px;
            margin: 5px;
            font-size: 14px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 3px;
            background: #f5f5f5;
        }
        button:hover {
            background: #e5e5e5;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <h1>å¤šè¯­è¨€å¬å†™åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>è¯­è¨€é€‰æ‹©æµ‹è¯•</h2>
        <div class="language-selector">
            <label for="languageSelect">é€‰æ‹©å¬å†™è¯­è¨€ï¼š</label>
            <select id="languageSelect">
                <option value="fr-FR">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                <option value="en-US">ğŸ‡ºğŸ‡¸ English</option>
                <option value="de-DE">ğŸ‡©ğŸ‡ª Deutsch</option>
                <option value="es-ES">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                <option value="it-IT">ğŸ‡®ğŸ‡¹ Italiano</option>
                <option value="pt-PT">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
                <option value="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                <option value="ja-JP">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                <option value="ko-KR">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                <option value="ar-SA">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="ru-RU">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="nl-NL">ğŸ‡³ğŸ‡± Nederlands</option>
                <option value="sv-SE">ğŸ‡¸ğŸ‡ª Svenska</option>
                <option value="no-NO">ğŸ‡³ğŸ‡´ Norsk</option>
            </select>
        </div>
        <button onclick="testVoiceSupport()">æµ‹è¯•è¯­éŸ³æ”¯æŒ</button>
        <div id="voiceSupportResult"></div>
    </div>

    <div class="test-section">
        <h2>æ•°å­—å¬å†™æµ‹è¯•</h2>
        <div>
            <label>æµ‹è¯•æ•°å­—ï¼š</label>
            <input type="number" id="testNumber" value="23" min="0" max="999">
            <button onclick="testNumberDictation()">æ’­æ”¾æ•°å­—</button>
        </div>
        <div id="numberTestResult"></div>
    </div>

    <div class="test-section">
        <h2>æ•°å­¦è¿ç®—å¬å†™æµ‹è¯•</h2>
        <div>
            <label>ç¬¬ä¸€ä¸ªæ•°ï¼š</label>
            <input type="number" id="operand1" value="15" min="0" max="99">
            <label>è¿ç®—ç¬¦ï¼š</label>
            <select id="operator">
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="Ã—">Ã—</option>
                <option value="Ã·">Ã·</option>
            </select>
            <label>ç¬¬äºŒä¸ªæ•°ï¼š</label>
            <input type="number" id="operand2" value="8" min="0" max="99">
            <button onclick="testMathDictation()">æ’­æ”¾è¿ç®—</button>
        </div>
        <div id="mathTestResult"></div>
    </div>

    <div class="test-section">
        <h2>å¯ç”¨è¯­éŸ³åˆ—è¡¨</h2>
        <button onclick="listAvailableVoices()">åˆ—å‡ºæ‰€æœ‰å¯ç”¨è¯­éŸ³</button>
        <div id="voicesList"></div>
    </div>

    <script>
        // è¿ç®—ç¬¦ç¿»è¯‘æ˜ å°„
        const operatorsByLanguage = {
            'fr-FR': { '+': 'plus', '-': 'moins', 'Ã—': 'fois', 'Ã·': 'divisÃ© par' },
            'en-US': { '+': 'plus', '-': 'minus', 'Ã—': 'times', 'Ã·': 'divided by' },
            'de-DE': { '+': 'plus', '-': 'minus', 'Ã—': 'mal', 'Ã·': 'geteilt durch' },
            'es-ES': { '+': 'mÃ¡s', '-': 'menos', 'Ã—': 'por', 'Ã·': 'dividido por' },
            'it-IT': { '+': 'piÃ¹', '-': 'meno', 'Ã—': 'per', 'Ã·': 'diviso per' },
            'pt-PT': { '+': 'mais', '-': 'menos', 'Ã—': 'vezes', 'Ã·': 'dividido por' },
            'zh-CN': { '+': 'åŠ ', '-': 'å‡', 'Ã—': 'ä¹˜', 'Ã·': 'é™¤ä»¥' },
            'ja-JP': { '+': 'ãŸã™', '-': 'ã²ã', 'Ã—': 'ã‹ã‘ã‚‹', 'Ã·': 'ã‚ã‚‹' },
            'ko-KR': { '+': 'ë”í•˜ê¸°', '-': 'ë¹¼ê¸°', 'Ã—': 'ê³±í•˜ê¸°', 'Ã·': 'ë‚˜ëˆ„ê¸°' },
            'ar-SA': { '+': 'Ø²Ø§Ø¦Ø¯', '-': 'Ù†Ø§Ù‚Øµ', 'Ã—': 'Ø¶Ø±Ø¨', 'Ã·': 'Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰' },
            'ru-RU': { '+': 'Ğ¿Ğ»ÑÑ', '-': 'Ğ¼Ğ¸Ğ½ÑƒÑ', 'Ã—': 'ÑƒĞ¼Ğ½Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ½Ğ°', 'Ã·': 'Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ½Ğ°' },
            'nl-NL': { '+': 'plus', '-': 'min', 'Ã—': 'keer', 'Ã·': 'gedeeld door' },
            'sv-SE': { '+': 'plus', '-': 'minus', 'Ã—': 'gÃ¥nger', 'Ã·': 'delat med' },
            'no-NO': { '+': 'pluss', '-': 'minus', 'Ã—': 'ganger', 'Ã·': 'delt pÃ¥' }
        };

        function showResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="test-result ${type}">${message}</div>`;
        }

        function getCurrentLanguage() {
            return document.getElementById('languageSelect').value;
        }

        function getBestVoiceForLanguage(language) {
            if (!window.speechSynthesis) return null;
            
            const voices = window.speechSynthesis.getVoices();
            
            // é¦–å…ˆå°è¯•ç²¾ç¡®åŒ¹é…
            let bestVoice = voices.find(voice => 
                voice.lang.toLowerCase() === language.toLowerCase()
            );

            // å¦‚æœæ²¡æœ‰ç²¾ç¡®åŒ¹é…ï¼Œå°è¯•è¯­è¨€ä»£ç åŒ¹é…
            if (!bestVoice) {
                const langCode = language.split('-')[0].toLowerCase();
                bestVoice = voices.find(voice => 
                    voice.lang.toLowerCase().startsWith(langCode)
                );
            }

            return bestVoice;
        }

        function testVoiceSupport() {
            const language = getCurrentLanguage();
            
            if (!window.speechSynthesis) {
                showResult('voiceSupportResult', 'æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ', 'error');
                return;
            }

            const voices = window.speechSynthesis.getVoices();
            if (voices.length === 0) {
                showResult('voiceSupportResult', 'æ­£åœ¨åŠ è½½è¯­éŸ³åˆ—è¡¨ï¼Œè¯·ç¨åé‡è¯•...', 'info');
                return;
            }

            const bestVoice = getBestVoiceForLanguage(language);
            
            if (bestVoice) {
                showResult('voiceSupportResult', 
                    `âœ… æ‰¾åˆ°æ”¯æŒçš„è¯­éŸ³: ${bestVoice.name} (${bestVoice.lang})${bestVoice.localService ? ' [æœ¬åœ°]' : ' [åœ¨çº¿]'}`, 
                    'success'
                );
            } else {
                showResult('voiceSupportResult', 
                    `âŒ æœªæ‰¾åˆ° ${language} çš„æ”¯æŒè¯­éŸ³`, 
                    'error'
                );
            }
        }

        function testNumberDictation() {
            const language = getCurrentLanguage();
            const number = document.getElementById('testNumber').value;
            
            if (!window.speechSynthesis) {
                showResult('numberTestResult', 'æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ', 'error');
                return;
            }

            const utterance = new SpeechSynthesisUtterance(number);
            utterance.lang = language;
            
            const bestVoice = getBestVoiceForLanguage(language);
            if (bestVoice) {
                utterance.voice = bestVoice;
            }

            utterance.onstart = () => {
                showResult('numberTestResult', `ğŸ”Š æ­£åœ¨æ’­æ”¾æ•°å­— "${number}" (${language})`, 'info');
            };

            utterance.onend = () => {
                showResult('numberTestResult', `âœ… æ•°å­—æ’­æ”¾å®Œæˆ`, 'success');
            };

            utterance.onerror = (event) => {
                showResult('numberTestResult', `âŒ æ’­æ”¾å¤±è´¥: ${event.error}`, 'error');
            };

            window.speechSynthesis.speak(utterance);
        }

        function testMathDictation() {
            const language = getCurrentLanguage();
            const operand1 = document.getElementById('operand1').value;
            const operator = document.getElementById('operator').value;
            const operand2 = document.getElementById('operand2').value;
            
            if (!window.speechSynthesis) {
                showResult('mathTestResult', 'æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ', 'error');
                return;
            }

            const operators = operatorsByLanguage[language] || operatorsByLanguage['en-US'];
            const operatorText = operators[operator];
            const mathExpression = `${operand1} ${operatorText} ${operand2}`;

            const utterance = new SpeechSynthesisUtterance(mathExpression);
            utterance.lang = language;
            
            const bestVoice = getBestVoiceForLanguage(language);
            if (bestVoice) {
                utterance.voice = bestVoice;
            }

            utterance.onstart = () => {
                showResult('mathTestResult', `ğŸ”Š æ­£åœ¨æ’­æ”¾è¿ç®— "${mathExpression}" (${language})`, 'info');
            };

            utterance.onend = () => {
                showResult('mathTestResult', `âœ… è¿ç®—æ’­æ”¾å®Œæˆ`, 'success');
            };

            utterance.onerror = (event) => {
                showResult('mathTestResult', `âŒ æ’­æ”¾å¤±è´¥: ${event.error}`, 'error');
            };

            window.speechSynthesis.speak(utterance);
        }

        function listAvailableVoices() {
            if (!window.speechSynthesis) {
                showResult('voicesList', 'æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ', 'error');
                return;
            }

            const voices = window.speechSynthesis.getVoices();
            
            if (voices.length === 0) {
                showResult('voicesList', 'æ­£åœ¨åŠ è½½è¯­éŸ³åˆ—è¡¨ï¼Œè¯·ç¨åé‡è¯•...', 'info');
                return;
            }

            let voicesHtml = '<h3>å¯ç”¨è¯­éŸ³åˆ—è¡¨ï¼š</h3><ul>';
            voices.forEach(voice => {
                voicesHtml += `<li><strong>${voice.name}</strong> (${voice.lang}) ${voice.localService ? '[æœ¬åœ°]' : '[åœ¨çº¿]'}</li>`;
            });
            voicesHtml += '</ul>';

            document.getElementById('voicesList').innerHTML = voicesHtml;
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', () => {
            // ç­‰å¾…è¯­éŸ³åˆ—è¡¨åŠ è½½
            setTimeout(() => {
                testVoiceSupport();
                listAvailableVoices();
            }, 1000);
        });

        // è¯­éŸ³åˆ—è¡¨å˜åŒ–æ—¶æ›´æ–°
        window.speechSynthesis.addEventListener('voiceschanged', () => {
            testVoiceSupport();
            listAvailableVoices();
        });
    </script>
</body>
</html>
